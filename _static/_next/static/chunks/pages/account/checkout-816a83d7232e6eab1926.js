(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9838],{45973:function(e,t,n){"use strict";var s=n(85893),r=n(9008),a=(n(67294),n(53010)),c=n(33875),i=n(84654),o=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)(c.Z,{})]}),d=(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.Z,{})});t.Z=function(e){var t,n=e.header,a=void 0===n?o:n,c=e.footer,i=void 0===c?d:c,l=e.children,u=e.title,p=void 0===u?"Page":u;return t=""!==p?"E-needz | "+p:"E-needz | Multipurpose Marketplace React Ecommerce Template",(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.default,{children:(0,s.jsx)("title",{children:t})}),a,l,i]})}},66173:function(e,t,n){"use strict";var s=n(85893),r=n(67294),a=n(14494),c=n(18428),i=n(48807);t.Z=(0,a.$j)((function(e){return e}))((function(e){var t,n,a,o,d=e.ecomerce,l=e.shipping,u=(0,c.Z)(),p=u.products,m=u.getProducts;return(0,r.useEffect)((function(){d.cartItems&&m(d.cartItems,"cart")}),[d]),p&&p.length>0?(o=(0,i.fu)(p),t=p.map((function(e,t){return(0,s.jsxs)("div",{className:"cart-items",children:[(0,s.jsxs)("span",{children:[e.title," ",(0,s.jsxs)("span",{children:["x",e.quantity]})]}),(0,s.jsxs)("small",{children:[(0,s.jsx)("img",{src:"/static/icons/currency-bdt.svg",alt:"bdt"})," ",e.quantity*e.price]})]},t)}))):t=(0,s.jsx)("p",{children:"No Product."}),!0===l?(n=(0,s.jsx)("figure",{children:(0,s.jsxs)("figcaption",{children:[(0,s.jsx)("strong",{children:"Shipping Fee"}),(0,s.jsxs)("small",{children:[(0,s.jsx)("img",{src:"/static/icons/currency-bdt.svg",alt:"bdt"})," 20.00"]})]})}),a=(0,s.jsx)("figure",{className:"ps-block__total",children:(0,s.jsxs)("h3",{children:["Total",(0,s.jsxs)("strong",{children:[(0,s.jsx)("img",{src:"/static/icons/currency-bdt.svg",alt:"bdt"}),parseInt(o)+20,".00"]})]})})):a=(0,s.jsx)("figure",{className:"ps-block__total",children:(0,s.jsxs)("h3",{children:["Total",(0,s.jsxs)("strong",{children:[(0,s.jsx)("img",{src:"/static/icons/currency-bdt.svg",alt:"bdt"}),parseInt(o),".00"]})]})}),(0,s.jsx)("div",{className:"ps-block--checkout-order",children:(0,s.jsxs)("div",{className:"ps-block__content",children:[(0,s.jsx)("figure",{children:(0,s.jsxs)("figcaption",{children:[(0,s.jsx)("strong",{children:"Product"}),(0,s.jsx)("strong",{children:"total"})]})}),(0,s.jsx)("figure",{className:"ps-block__items",children:t}),(0,s.jsx)("figure",{children:(0,s.jsxs)("figcaption",{children:[(0,s.jsx)("strong",{children:"Subtotal"}),(0,s.jsxs)("small",{children:[(0,s.jsx)("img",{src:"/static/icons/currency-bdt.svg",alt:"bdt"})," ",o]})]})}),n,a]})})}))},95681:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return A},default:function(){return E}});var s=n(85893),r=n(11163),a=n(67294),c=n(45973),i=n(66173),o=n(59999),d=n(26265),l=n(809),u=n.n(l),p=n(92447),m=n(64121),h=n(7085),f=n(10642),v=n(11382),x=n(56883),j=n(36808),b=n(41664),g=n(6645),_=n(14494),y=n(39249),N=n(18428),k=n(71888),w=n(48807);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=(0,_.$j)((function(e){return e}))((function(e){var t=e.ecomerce,n=(0,_.I0)(),c=(0,r.useRouter)(),i=(0,g.Z)(["auth","cart"]),l=(0,m.Z)(i,2),S=l[0],C=(l[1],(0,g.Z)(["amnt"])),P=((0,m.Z)(C,1)[0],(0,N.Z)()),Z=P.products,A=P.getProducts,E=(0,s.jsx)(h.Z,{style:{fontSize:24},spin:!0}),T=(0,a.useState)({recipientName:"",phoneNo:"",state:"",city:"",area:"",address:""}),F=T[0],D=T[1],z=(0,a.useState)([]),I=z[0],q=z[1],R=(0,a.useState)([]),Y=R[0],M=R[1],V=(0,a.useState)([]),X=V[0],$=V[1],J=(0,a.useState)(""),B=J[0],G=J[1],H=(0,a.useState)(""),K=(H[0],H[1],(0,a.useState)(!1)),L=K[0],Q=K[1],U=(0,a.useState)(!1),W=U[0],ee=U[1],te=(0,a.useState)(!1),ne=te[0],se=te[1],re=(0,a.useState)(!1),ae=re[0],ce=re[1],ie=(0,a.useState)(!1),oe=ie[0],de=ie[1],le=(0,a.useState)(!1),ue=le[0],pe=le[1],me=(0,a.useState)(null),he=me[0],fe=me[1],ve=(0,a.useState)(null),xe=(ve[0],ve[1]);Z&&(null===Z||void 0===Z?void 0:Z.length)>0&&(0,w.fu)(Z),(0,a.useEffect)((function(){t.cartItems&&A(t.cartItems,"cart")}),[t]),(0,a.useEffect)((function(){(function(){var e=(0,p.Z)(u().mark((function e(){var t,n,s,r,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("customer_id",null===(t=S.auth)||void 0===t?void 0:t.id),e.next=4,fetch("".concat("https://soft35.bdtask.com/eneedz_api/api/react/customer_dashboard","/customer_address"),{method:"POST",body:n});case 4:return s=e.sent,e.next=7,s.json();case 7:200===(null===(r=e.sent)||void 0===r?void 0:r.response_status)&&(q(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.address_list),xe(null===r||void 0===r||null===(c=r.data)||void 0===c?void 0:c.address_list.find((function(e){return"1"===e.is_primary}))));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[ne,ue]);var je=function(e){var t=e.target,n=t.name,s=t.value;D(O(O({},F),{},(0,d.Z)({},n,s)))},be=function(){var e=(0,p.Z)(u().mark((function e(t){var n,s,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=new FormData).append("customer_id",null===(n=S.auth)||void 0===n?void 0:n.id),e.next=4,fetch("".concat("https://soft35.bdtask.com/eneedz_api/api/react/customer_dashboard","/statelist"),{method:"POST",body:s});case 4:return r=e.sent,e.next=7,r.json();case 7:200===(null===(a=e.sent)||void 0===a?void 0:a.response_status)&&M(null===a||void 0===a?void 0:a.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,p.Z)(u().mark((function e(t){var n,s,r,a,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=new FormData).append("customer_id",null===(n=S.auth)||void 0===n?void 0:n.id),s.append("state_id",B),e.next=5,fetch("".concat("https://soft35.bdtask.com/eneedz_api/api/react/customer_dashboard","/citylist"),{method:"POST",body:s});case 5:return r=e.sent,e.next=8,r.json();case 8:200===(null===(a=e.sent)||void 0===a?void 0:a.response_status)&&(c={id:"00",name:"Select City"},$((function(e){return[c].concat((0,o.Z)(null===a||void 0===a?void 0:a.data))})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=(0,p.Z)(u().mark((function e(t){var n,s,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee(!0),(s=new FormData).append("customer_id",null===(n=S.auth)||void 0===n?void 0:n.id),s.append("customer_name",F.recipientName),s.append("customer_phone",F.phoneNo),s.append("division",B),s.append("city",F.city),s.append("area",F.area),s.append("address",F.address);try{r={method:"POST",body:s},fetch("".concat("https://soft35.bdtask.com/eneedz_api/api/react/customer_dashboard","/create_address"),r).then((function(e){return e.json()})).then((function(e){0===e.response_status&&y.Am.error(e.message),200===e.response_status&&(y.Am.success("You could successfully added a new address"),ee(!1),Q(!1),se(!ne),D({recipientName:"",phoneNo:"",state:"",city:"",area:"",address:""}))}))}catch(t){console.log("Create new address error",t)}case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=null===I||void 0===I?void 0:I.find((function(e){return"1"===e.is_primary})),Ne=function(){var e=(0,p.Z)(u().mark((function e(t){var s,r,a,i,o,d,l,p,m,h;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(de(!0),i=he||(null===ye||void 0===ye?void 0:ye.address_id),o=new FormData,d=[],l=null===S||void 0===S||null===(s=S.cart)||void 0===s?void 0:s.map((function(e){d.push({product_id:e.id,campaign_id:e.campaign_id,qty:e.quantity})})),S.auth.id||void 0===(null===(r=S.auth)||void 0===r?void 0:r.id)){e.next=11;break}return y.Am.error("Please login first & then confirm order"),de(!1),e.abrupt("return");case 11:if(i){e.next=17;break}return y.Am.error("Please select your address"),de(!1),e.abrupt("return");case 17:if(ae){e.next=23;break}return y.Am.error("You are not agreed yet with our terms & conditions."),de(!1),e.abrupt("return");case 23:if(void 0!==l){e.next=27;break}return y.Am.error("No items in your cart"),de(!1),e.abrupt("return");case 27:return o.append("customer_id",null===(a=S.auth)||void 0===a?void 0:a.id),o.append("address_id",i),o.append("cart_details",JSON.stringify(d)),o.append("response_url","".concat(location.origin,"/account/invoices")),e.next=33,fetch("".concat("https://soft35.bdtask.com/eneedz_api/api/react/customer_dashboard","/submit_checkout"),{method:"POST",body:o});case 33:return p=e.sent,e.next=36,p.json();case 36:m=e.sent,console.log("submit_checkout",m),0===m.response_status?(y.Am.error(m.message),de(!1)):200===(null===m||void 0===m?void 0:m.response_status)?(y.Am.success("Your order has been placed successfully!"),q(null===m||void 0===m||null===(h=m.data)||void 0===h?void 0:h.address_list),(0,j.remove)("cart"),n((0,k.w0)([])),de(!1),pe(!ue),ce(!1),c.push("/account/invoices")):(de(!1),y.Am.error(m.message));case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{className:"ps-form__heading",children:"Address"}),(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)("select",{className:"form-control","aria-label":"Customer Address",name:"address",style:{flex:1},onChange:function(e){return fe(e.target.value)},children:(null===I||void 0===I?void 0:I.length)>0&&I.map((function(e){return"1"===e.is_primary?(0,s.jsx)("option",{value:e.address_id,selected:!0,children:e.address},e.address_id):(0,s.jsx)("option",{value:e.address_id,children:e.address},e.address_id)}))}),(0,s.jsx)("button",{type:"button",className:"ps-btn btn-black ml-3",onClick:function(){Q(!0)},children:"Add new Address"})]}),(0,s.jsx)("div",{className:"primary-address mt-4",children:ye&&(0,s.jsx)("p",{children:"".concat(ye.customer_name," \n          ").concat(ye.customer_phone," \n          ").concat(ye.address," \n          ").concat(ye.area," \n          ").concat(ye.city," \n          ").concat(ye.division)})}),(0,s.jsxs)(f.Z,{title:"Add New Address",visible:L,onOk:_e,onCancel:function(e){Q(!1)},okText:"Save",cancelText:"Cancel",children:[(0,s.jsxs)("form",{onSubmit:_e,autoComplete:"off",children:[(0,s.jsxs)("div",{className:"form-group d-flex",children:[(0,s.jsx)("input",{type:"text",name:"recipientName",className:"form-control mr-2",placeholder:"Recipient Name",value:F.recipientName,onChange:je}),(0,s.jsx)("input",{type:"text",name:"phoneNo",className:"form-control",placeholder:"Phone No",value:F.phoneNo,onChange:je})]}),(0,s.jsxs)("div",{className:"area-group form-group d-flex",children:[(0,s.jsxs)("select",{className:"form-control mr-2","aria-label":"Select Division",name:"division",onClick:be,onChange:function(e){G(e.target.value)},children:[0===(null===Y||void 0===Y?void 0:Y.length)&&(0,s.jsx)("option",{value:"0",children:"Select Division"}),(null===Y||void 0===Y?void 0:Y.length)>0&&Y.map((function(e){return(0,s.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),(0,s.jsxs)("select",{className:"form-control mr-2","aria-label":"Select City",name:"city",style:{flex:1},onClick:ge,onChange:je,children:[0===X.length&&(0,s.jsx)("option",{value:"0",children:"Select City"}),X.length>0&&X.map((function(e){return(0,s.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),(0,s.jsx)("input",{type:"text",name:"area",className:"form-control",placeholder:"Area",value:F.area,onChange:je})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{type:"text",name:"address",className:"form-control",placeholder:"Enter Your Address",value:F.address,onChange:je})})]}),W&&(0,s.jsx)("div",{className:"spinner-wrapper",children:(0,s.jsx)(v.Z,{indicator:E})})]}),(0,s.jsxs)(x.Z,{className:"ps-form__billing-info",autoComplete:"off",onFinish:function(){c.push("/account/shipping")},children:[(0,s.jsxs)("div",{className:"form-group mt-5",children:[(0,s.jsx)("p",{children:"* For this order these Order Policy applicable"}),(0,s.jsx)("p",{children:"* Price included VAT for VAT applicable products"}),(0,s.jsxs)("div",{className:"ps-checkbox",children:[(0,s.jsx)("input",{className:"form-control",type:"checkbox",id:"keep-update",onChange:function(){return ce(!ae)}}),(0,s.jsxs)("label",{htmlFor:"keep-update",children:["I agree to the"," ",(0,s.jsx)(b.default,{href:"/terms-conditions",children:(0,s.jsx)("a",{children:"Terms & Conditions"})})," ","and"," ",(0,s.jsx)(b.default,{href:"/privacy-policy",children:(0,s.jsx)("a",{children:"Privacy Policy"})})," ","of E-needz."]})]})]}),(0,s.jsxs)("div",{className:"ps-form__submit d-flex align-items-center justify-content-between",children:[(0,s.jsx)("div",{className:"ps-block__footer",children:(0,s.jsx)(b.default,{href:"/shop",children:(0,s.jsx)("a",{className:"ps-btn btn-small",children:"Continue to Shopping"})})}),(0,s.jsx)("button",{type:"button",onClick:Ne,className:"ps-btn btn-small",disabled:!ae||oe,children:"Confirm Order"})]})]})]})})),P=function(){return(0,s.jsx)("div",{className:"ps-checkout ps-section--shopping",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-lg-7 col-md-7 col-sm-12",children:[(0,s.jsx)("div",{className:"mb-5",children:(0,s.jsx)("h3",{children:"Checkout Information"})}),(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)(C,{})})})]}),(0,s.jsxs)("div",{className:"col-lg-5 col-md-7 col-sm-12",children:[(0,s.jsx)("div",{className:"mb-5",children:(0,s.jsx)("h3",{children:"Order Summary"})}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("div",{className:"ps-form__orders",children:(0,s.jsx)(i.Z,{})}),(0,s.jsx)("div",{className:"payment-methods"})]})})]})]})})})},Z=n(53010),A=!0,E=function(e){var t=e.auth,n=(0,r.useRouter)();return(0,s.jsx)(s.Fragment,{children:t?(0,s.jsx)(c.Z,{footer:(0,s.jsx)(Z.Z,{}),title:"Checkout",children:(0,s.jsx)("div",{className:"ps-page--simple",children:(0,s.jsx)(P,{})})}):void n.push("/account/login")})}},38252:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/checkout",function(){return n(95681)}])}},function(e){e.O(0,[8116,642,6883,4740,9774,2888,179],(function(){return t=38252,e(e.s=t);var t}));var t=e.O();_N_E=t}]);