(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1823],{5467:function(e,t,n){"use strict";function s(e){return Object.keys(e).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||"data-__"===n.substr(0,7)||(t[n]=e[n]),t}),{})}n.d(t,{Z:function(){return s}})},76772:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var s=n(22122),a=n(96156),c=n(28481),r=n(67294),o=n(54549),i=n(15873),l=n(57119),d=n(68628),u=n(73218),m=n(38819),h=n(68855),p=n(40847),f=n(43061),x=n(60444),v=n(94184),j=n.n(v),g=n(65632),N=n(5467),_=n(6610),y=n(5991),b=n(65255),Z=n(81907),E=function(e){(0,b.Z)(n,e);var t=(0,Z.Z)(n);function n(){var e;return(0,_.Z)(this,n),(e=t.apply(this,arguments)).state={error:void 0,info:{componentStack:""}},e}return(0,y.Z)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.description,s=e.children,a=this.state,c=a.error,o=a.info,i=o&&o.componentStack?o.componentStack:null,l="undefined"===typeof t?(c||"").toString():t,d="undefined"===typeof n?i:n;return c?r.createElement(O,{type:"error",message:l,description:r.createElement("pre",null,d)}):s}}]),n}(r.Component),w=n(96159),k=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]])}return n},S={success:m.Z,info:p.Z,error:f.Z,warning:h.Z},C={success:i.Z,info:d.Z,error:u.Z,warning:l.Z},P=function(e){var t,n=e.description,i=e.prefixCls,l=e.message,d=e.banner,u=e.className,m=void 0===u?"":u,h=e.style,p=e.onMouseEnter,f=e.onMouseLeave,v=e.onClick,_=e.afterClose,y=e.showIcon,b=e.closable,Z=e.closeText,E=e.action,P=k(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),O=r.useState(!1),I=(0,c.Z)(O,2),M=I[0],A=I[1],D=r.useRef(),R=r.useContext(g.E_),T=R.getPrefixCls,F=R.direction,L=T("alert",i),H=function(e){var t;A(!0),null===(t=P.onClose)||void 0===t||t.call(P,e)},z=!!Z||b,G=function(){var e=P.type;return void 0!==e?e:d?"warning":"info"}(),X=!(!d||void 0!==y)||y,B=j()(L,"".concat(L,"-").concat(G),(t={},(0,a.Z)(t,"".concat(L,"-with-description"),!!n),(0,a.Z)(t,"".concat(L,"-no-icon"),!X),(0,a.Z)(t,"".concat(L,"-banner"),!!d),(0,a.Z)(t,"".concat(L,"-rtl"),"rtl"===F),t),m),Y=(0,N.Z)(P);return r.createElement(x.Z,{visible:!M,motionName:"".concat(L,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:_},(function(e){var t=e.className,c=e.style;return r.createElement("div",(0,s.Z)({ref:D,"data-show":!M,className:j()(B,t),style:(0,s.Z)((0,s.Z)({},h),c),onMouseEnter:p,onMouseLeave:f,onClick:v,role:"alert"},Y),X?function(){var e=P.icon,t=(n?C:S)[G]||null;return e?(0,w.wm)(e,r.createElement("span",{className:"".concat(L,"-icon")},e),(function(){return{className:j()("".concat(L,"-icon"),(0,a.Z)({},e.props.className,e.props.className))}})):r.createElement(t,{className:"".concat(L,"-icon")})}():null,r.createElement("div",{className:"".concat(L,"-content")},r.createElement("div",{className:"".concat(L,"-message")},l),r.createElement("div",{className:"".concat(L,"-description")},n)),E?r.createElement("div",{className:"".concat(L,"-action")},E):null,z?r.createElement("button",{type:"button",onClick:H,className:"".concat(L,"-close-icon"),tabIndex:0},Z?r.createElement("span",{className:"".concat(L,"-close-text")},Z):r.createElement(o.Z,null)):null)}))};P.ErrorBoundary=E;var O=P},45973:function(e,t,n){"use strict";var s=n(85893),a=n(9008),c=(n(67294),n(53010)),r=n(33875),o=n(84654),i=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{}),(0,s.jsx)(r.Z,{})]}),l=(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(c.Z,{})});t.Z=function(e){var t,n=e.header,c=void 0===n?i:n,r=e.footer,o=void 0===r?l:r,d=e.children,u=e.title,m=void 0===u?"Page":u;return t=""!==m?"E-needz | "+m:"E-needz | Multipurpose Marketplace React Ecommerce Template",(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.default,{children:(0,s.jsx)("title",{children:t})}),c,d,o]})}},9941:function(e,t,n){"use strict";var s=n(85893),a=n(64121),c=n(36808),r=n(41664),o=n(11163),i=(n(67294),n(6645)),l=n(14494),d=n(39249),u=n(20301);t.Z=function(e){var t,n,m,h,p,f=e.data,x=(0,l.I0)(),v=(0,i.Z)(["auth"]),j=(0,a.Z)(v,2),g=j[0],N=j[1],_=(0,o.useRouter)();return(0,s.jsxs)("aside",{className:"ps-widget--account-dashboard",children:[(0,s.jsxs)("div",{className:"ps-widget__header",children:[(0,s.jsx)("div",{className:"profile-image",children:null!==g&&void 0!==g&&g.auth?(0,s.jsx)("img",{src:null===(t=g.auth)||void 0===t?void 0:t.image,alt:null===(n=g.auth)||void 0===n?void 0:n.name}):(0,s.jsx)("img",{src:"/static/img/users/3.jpg",alt:null===(m=g.auth)||void 0===m?void 0:m.name})}),(0,s.jsxs)("figure",{children:[(0,s.jsx)("figcaption",{children:null===(h=g.auth)||void 0===h?void 0:h.name}),(0,s.jsx)("p",{children:null===(p=g.auth)||void 0===p?void 0:p.mobile})]})]}),(0,s.jsx)("div",{className:"ps-widget__content",children:(0,s.jsxs)("ul",{children:[f.map((function(e){return(0,s.jsx)("li",{className:e.active?"active":"",children:(0,s.jsx)(r.default,{href:e.url,children:(0,s.jsxs)("a",{children:[(0,s.jsx)("i",{className:e.icon}),e.text]})})},e.text)})),(0,s.jsx)("li",{className:"/account/review"==_.pathname?"active":"",children:(0,s.jsx)(r.default,{href:"review",children:(0,s.jsxs)("a",{children:[(0,s.jsx)("i",{className:"icon-book"}),"Review"]})})}),(0,s.jsx)("li",{children:(0,s.jsx)(r.default,{href:"#",children:(0,s.jsxs)("a",{onClick:function(e){e.preventDefault(),N("auth"),x((0,u.Gd)()),(0,c.remove)("auth"),d.Am.success("You successfully logged out!"),localStorage.removeItem("paymentInfo"),localStorage.removeItem("paymentGateway"),localStorage.removeItem("p_info"),_.push("/")},children:[(0,s.jsx)("i",{className:"icon-exit"}),"Logout"]})})})]})})]})}},46253:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return x}});var s=n(85893),a=n(59999),c=n(64121),r=n(76772),o=n(41664),i=n(11163),l=n(67294),d=n(6645),u=n(14494),m=n(45973),h=n(9941),p=n(53010),f=n(98374),x=!0;t.default=function(e){var t=e.auth,n=(0,u.I0)(),x=(0,i.useRouter)(),v=((0,u.v9)((function(e){return e})),(0,l.useState)([])),j=v[0],g=v[1],N=(0,l.useState)([]),_=N[0],y=N[1],b=(0,l.useState)(0),Z=(b[0],b[1]),E=(0,l.useState)(0),w=E[0],k=(E[1],(0,l.useState)(10)),S=k[0],C=(k[1],(0,l.useState)(!1)),P=C[0],O=C[1],I=(0,d.Z)(["auth"]),M=(0,c.Z)(I,1)[0];(0,l.useEffect)((function(){n((0,f.$)(!1))}),[]),(0,l.useEffect)((function(){var e,t=new FormData;t.append("customer_id",null===(e=M.auth)||void 0===e?void 0:e.id);var n={method:"POST",body:t,redirect:"follow"};fetch("".concat("https://soft35.bdtask.com/eneedz_api/api/react/customer_dashboard","/payment_history"),n).then((function(e){return e.json()})).then((function(e){if(200===e.response_status){g(e.data);var t=(0,a.Z)(new Map(e.data.map((function(e){return[e.order_no,e]}))).values());y(t),Z(e.data.length)}else O(!0)})).catch((function(e){return console.log("error",e)}))}),[M.auth]),(0,l.useEffect)((function(){if(j.length>0){var e=j.map((function(e,t){if(t>=w&&t<S)return e}));y(e)}}),[S]);var A=function(e){localStorage.setItem("order_no",e.target.getAttribute("data-orderno"))},D=_.map((function(e,t){if(void 0!==e)return"1"===e.order_status?(0,s.jsx)("span",{className:"ps-badge success",children:"Pending"}):"2"===e.order_status?(0,s.jsx)("span",{className:"ps-badge",style:{backgroundColor:"yellow"},children:"Processing"}):"3"===e.order_status?(0,s.jsx)("span",{className:"ps-badge success",children:"Shipping"}):"4"===e.order_status?(0,s.jsx)("span",{className:"ps-badge success",children:"Delivered"}):"5"===e.order_status?(0,s.jsx)("span",{className:"ps-badge danger",children:"Returned"}):"6"===e.order_status?(0,s.jsx)("span",{className:"ps-badge success",children:"Cancelled"}):"7"===e.order_status?(0,s.jsx)("span",{className:"ps-badge success",children:"Partial Delivery"}):"18"===e.order_status?(0,s.jsx)("span",{className:"ps-badge success",children:"Refunded"}):"19"===e.order_status&&(0,s.jsx)("span",{className:"ps-badge success",children:"Picked"}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:t+1}),(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:e.order_no})}),(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:e.customer_name})}),(0,s.jsx)("td",{children:(0,s.jsxs)("strong",{children:["\u09f3 ",e.payment_amount]})}),(0,s.jsx)("td",{children:(0,s.jsx)(o.default,{href:"/account/payment-history/".concat(e.order_id),children:(0,s.jsx)("a",{className:"ps-btn ps-btn--sm",onClick:A,"data-orderno":e.order_no,children:"Details"})})})]},t)}));return(0,s.jsx)(s.Fragment,{children:t?(0,s.jsx)(m.Z,{footer:(0,s.jsx)(p.Z,{}),title:"Payment History",children:(0,s.jsx)("section",{className:"ps-my-account ps-page--account",children:(0,s.jsx)("div",{className:"ps-container",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-lg-3",children:(0,s.jsx)("div",{className:"ps-page__left",children:(0,s.jsx)(h.Z,{data:[{text:"Account Information",url:"/account/user-information",icon:"icon-user"},{text:"Invoices",url:"/account/invoices",icon:"icon-papers"},{text:"Track Order",url:"/account/order-tracking",icon:"icon-papers"},{text:"Payment History",url:"/account/payment-history",icon:"icon-cog",active:!0},{text:"Address",url:"/account/address",icon:"icon-map-marker"},{text:"Change Password",url:"/account/change-password",icon:"icon-lock"}]})})}),(0,s.jsx)("div",{className:"col-lg-9",children:(0,s.jsx)("div",{className:"ps-page__content",children:(0,s.jsxs)("div",{className:"ps-section--account-setting",children:[(0,s.jsx)("div",{className:"ps-section__header",children:(0,s.jsx)("h3",{children:"Payment History"})}),(0,s.jsxs)("div",{className:"ps-section__content",children:[P?(0,s.jsx)(r.Z,{message:"Failed to fetch data",type:"error"}):"",(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table ps-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"Order No"}),(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Amount"}),(0,s.jsx)("th",{children:"Action"})]})}),(0,s.jsx)("tbody",{className:"text-center",children:D})]})})]})]})})})]})})})}):void x.push("/account/login")})}},62059:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/payment-history",function(){return n(46253)}])}},function(e){e.O(0,[8116,4740,9774,2888,179],(function(){return t=62059,e(e.s=t);var t}));var t=e.O();_N_E=t}]);